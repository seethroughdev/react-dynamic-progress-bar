"use strict";var _interopRequire=function(t){return t&&t.__esModule?t["default"]:t},React=_interopRequire(require("react")),RP=React.PropTypes,CONFIG;Date.now||(Date.now=function(){return(new Date).getTime()}),function(){for(var t=["webkit","moz"],e=0;e<t.length&&!window.requestAnimationFrame;++e){var r=t[e];window.requestAnimationFrame=window[r+"RequestAnimationFrame"],window.cancelAnimationFrame=window[r+"CancelAnimationFrame"]||window[r+"CancelRequestAnimationFrame"]}if(/iP(ad|hone|od).*OS 6/.test(window.navigator.userAgent)||!window.requestAnimationFrame||!window.cancelAnimationFrame){var a=0;window.requestAnimationFrame=function(t){var e=Date.now(),r=Math.max(a+16,e);return setTimeout(function(){t(a=r)},r-e)},window.cancelAnimationFrame=clearTimeout}}(),CONFIG={stallBarAmt:.74,defaultBarHeight:3,defaultBarColor:"#00b4ff",defaultBarId:"progressBar",incrementAlgorithm:function(t){return t+.001*Math.cos(t*(Math.PI/1.6))}};var dynamicProgressBar=React.createClass({displayName:"dynamicProgressBar",propTypes:{bar:RP.bool.isRequired,barColor:RP.string,barValue:RP.number,barStyle:RP.object,barHeight:RP.string,barClass:RP.string,barId:RP.string,barCallback:RP.func},resetStateValues:{value:0,complete:!1},getInitialState:function(){return this.resetStateValues},resetValue:function(t){this.setState(this.resetStateValues),this.style=this.styleTransform(!0),this.checkValue(t)},checkValue:function(){var t=void 0===arguments[0]?this.props.bar:arguments[0];return t?(this.incrementStatus(this.state.value),window.requestAnimationFrame(this.checkValue)):t?void 0:this.finishValue()},finishValue:function(){var t=this.state.value;return t>=1?setTimeout(this.completeValue,750):(this.setState({value:t+.03*t}),window.requestAnimationFrame(this.finishValue))},completeValue:function(){this.setState({complete:!0}),"function"==typeof this.props.barCallback&&this.props.barCallback()},incrementStatus:function(t){if(!(t>CONFIG.stallBarAmt)){var e=CONFIG.incrementAlgorithm(t);return this.setState({value:e}),e}},defaultStyle:function(){return{height:this.props.barHeight||CONFIG.defaultBarHeight,background:this.props.barColor||CONFIG.defaultBarColor,position:"fixed",zIndex:100,transition:"transform 200ms linear",MozTransition:"-moz-transform 200ms linear",WebkitTransition:"-webkit-transform 200ms linear",MsTransition:"-ms-transform 200ms linear",OTransition:"o-transform 200ms linear",top:0,left:0}},setStyle:function(t){var e,r=this.defaultStyle();if(t)for(e in t)r[e]=t[e];return"bottom"===this.props.barPosition&&(delete r.top,r.bottom=0),r},styleTransform:function(t){var e=this.style,r=0,a=["transform","WebkitTransform","MozTransform","MsTransform","OTransform"];return t||(r="bottom"===this.props.barPosition?e.height:-1*e.height),a.forEach(function(t){e[t]="translateY("+r+"px)"}),e},componentWillReceiveProps:function(t){var e=t.bar;e?this.resetValue(e):"boolean"==typeof e&&this.checkValue(e)},componentWillMount:function(){this.style=this.setStyle(this.props.barStyle),this.props.bar===!0&&this.checkValue()},render:function(){var t=this.state.complete?this.styleTransform():this.style;return t.width=this.props.barValue||100*this.state.value+"%",React.createElement("div",{id:this.props.barId||CONFIG.defaultBarId,className:this.props.barClass,style:t})}});module.exports=dynamicProgressBar;