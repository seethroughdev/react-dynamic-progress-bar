"use strict";var React=window.React||require("react"),RP=React.PropTypes;Date.now||(Date.now=function(){return(new Date).getTime()}),function(){for(var t=["webkit","moz"],e=0;e<t.length&&!window.requestAnimationFrame;++e){var i=t[e];window.requestAnimationFrame=window[i+"RequestAnimationFrame"],window.cancelAnimationFrame=window[i+"CancelAnimationFrame"]||window[i+"CancelRequestAnimationFrame"]}if(/iP(ad|hone|od).*OS 6/.test(window.navigator.userAgent)||!window.requestAnimationFrame||!window.cancelAnimationFrame){var a=0;window.requestAnimationFrame=function(t){var e=Date.now(),i=Math.max(a+16,e);return setTimeout(function(){t(a=i)},i-e)},window.cancelAnimationFrame=clearTimeout}}();var dynamicProgressBar=React.createClass({displayName:"dynamicProgressBar",resetStateValues:{value:0,complete:!1},getInitialState:function(){return this.resetStateValues},propTypes:{basssr:RP.bool.isRequired},resetValue:function(){this.setState(this.resetStateValues),this.styleTransform(!0),this.checkValue(),console.log("reset",this.props.bar)},checkValue:function(){return this.props.bar===!0?(this.incrementStatus(this.state.value),window.requestAnimationFrame(this.checkValue)):this.props.bar===!1?this.finishValue():void 0},finishValue:function(){var t=this.state.value;return t>=1?void setTimeout(this.completeValue,750):(this.setState({value:t+.02*t}),void window.requestAnimationFrame(this.finishValue))},completeValue:function(){this.setState({complete:!0})},incrementStatus:function(t){if(!(t>.74)){var e=t+.001*Math.cos(t*(Math.PI/1.6));return this.setState({value:e}),e}},defaultStyle:function(){return{height:this.props.barHeight||3,background:this.props.barColor||"#00b4ff",position:"fixed",zIndex:100,transition:"transform 200ms linear",MozTransition:"-moz-transform 200ms linear",WebkitTransition:"-webkit-transform 200ms linear",MsTransition:"-ms-transform 200ms linear",OTransition:"o-transform 200ms linear",top:0,left:0}},setStyle:function(t){var e,i=this.defaultStyle();if(t)for(e in t)i[e]=t[e];return"bottom"===this.props.barPosition&&(delete i.top,i.bottom=0),i},styleTransform:function(t){var e=this.style,i=0,a=["transform","WebkitTransform","MozTransform","MsTransform","OTransform"];return t||(i="bottom"===this.props.barPosition?e.height:-1*e.height),a.forEach(function(t){e[t]="translateY("+i+"px)"}),e},componentWillReceiveProps:function(t){t.bar===!0&&this.state.complete?setTimeout(this.resetValue,400):"boolean"==typeof t.bar&&this.checkValue()},componentWillMount:function(){this.style=this.setStyle(this.props.barStyle),this.props.bar===!0&&this.checkValue()},render:function(){this.state.complete&&this.styleTransform();var t=this.style;return t.width=this.props.barValue||100*this.state.value+"%",React.createElement("div",{id:"progressBar",style:t,"data-bar-value":this.state.value})}});module.exports=dynamicProgressBar;